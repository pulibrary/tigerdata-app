<div class="heading-frame">
  <div class="heading-text">
    <%= @request_model.project_title %>
  </div>
<div class="deco-line"></div>

<div class="request-description">
  This screen is a review of the request. No project has been created yet.
</div>

<div class="horizontal-frame">
    <% if @request_presenter.eligible_to_edit?(current_user)%>
      <% if !@request_model.submitted?%>
        <%= link_to "Edit request", new_project_review_and_submit_path(@request_model.id),class: "btn btn-dark btn-sm" %>
      <% else %>
        <%= link_to "Edit submitted request", admin_edit_request_path(@request_model.id),class: "btn btn-dark btn-sm" %>
        <%= link_to "Approve request", approve_request_path(@request_model.id), class: "btn btn-dark btn-sm" %>
      <% end %>
    <% end %>
</div>

<% if @request_model.error_message.present? %>
<p class="error-field">There was an error with this request</p>
<textarea class="disabled-field" rows="10" cols="50">
    <%= @request_model.error_message %>
  </textarea>
<% end %>

<ul class="request_model-fields">
    <%
=begin%>
      Basic Info
      Project Title
      Project Directory
      Project Purpose
      Project Description
      Departments
      LINE BREAK

      Roles and People
      Data Sponsor
      Data Manager
      Data Users
      LINE BREAK

      Storage and Access
      Storage Needed
      Estimated Number of Files
      Connection Options:
      Do you need to connect to HPC?
      Do you need SMB (network file share)?
      Do you need to enable Globus transfers?
<%
=end%>
    <li>Request created at: <%= @request_model.created_at.strftime("%m/%d/%Y") %></li>
    <li>Request updated at: <%= @request_model.updated_at.strftime("%m/%d/%Y") %></li>
    <li>Project title: <%= @request_model.project_title %></li>
    <li>Request state: <%= @request_model.state %></li>
    <li>Data sponsor: <%= @request_presenter.data_sponsor %></li>
    <li>Data manager: <%= @request_presenter.data_manager %></li>
    <li>Data user(s):
      <ul id="request-data-users">
        <% (@request_model.user_roles || []).each do |data_user| %>
          <li><%= "#{data_user["name"]} (#{data_user["uid"]})" %></li>
        <% end %>
      </ul>
    </li>
    <li>Department(s):
      <ul id="request-data-departments">
        <% (@request_model.departments || []).each do |department| %>
          <li><%= "#{department["name"]} (#{department["code"]})" %></li>
        <% end %>
      </ul>
  </li>
    <li>Project Purpose: <%= @request_model.project_purpose %></li>
    <li>Description: <%= @request_model.description %></li>
    <li>Parent folder: <%= @request_model.parent_folder %></li>
    <li>Project folder: <%= @request_model.project_folder %></li>
    <li>Project ID: <%= @request_model.project_id %></li>
    <li>Quota: <%= @request_model.approved_quota_size %> <%= @request_model.approved_quota_unit %></li>
    <li>Number of files: <%= @request_model.number_of_files %></li>
    <li>High Performance Computing: <%= @request_model.hpc %></li>
    <li>Network file share: <%= @request_model.smb %></li>
    <li>Globus transfers: <%= @request_model.globus %></li>
    <li>Requested by: <%= @request_model.requested_by %></li>
</ul>
